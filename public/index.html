<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPL Player Stats</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid #ddd; }
        th { background: #007BFF; color: white; }
    </style>
</head>
<body>

    <h1>Fantasy Premier League Users</h1>
    <button onclick="fetchUserName()">Get Username and Points</button>
    <p id="userName"></p>
    <table>
        <thead>
            <tr>
                <th>Player Name</th>
                <th>Points For Gameweek</th>
                <th>Total Points</th>
            </tr>
        </thead>
        <tbody id="playerTable"></tbody>
    </table>

    <script>
        /*async function fetchPlayers() {
            try {
                const response = await fetch("/api/fpl");
                const players = await response.json();
                displayPlayers(players);
            } catch (error) {
                console.error("Error fetching players:", error);
            }
        }

        function displayPlayers(players) {
            const tableBody = document.getElementById("playerTable");
            const playerData = {1: "Goalkeeper", 2: "Defender", 3: "Midfielder", 4: "Forward"};

            players.slice(0, 10).forEach(player => {
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${player.first_name} ${player.second_name}</td>
                    <td>${positionNames[player.element_type] || "Unknown"}</td>
                    <td>${player.total_points}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        fetchPlayers();*/

        async function fetchUserName() {
            try {
                const response = await fetch("http://localhost:3000/api/fpl");
                const data = await response.json();

                // Extract user name from API response
                const firstName = data.player_first_name || "Unknown";
                const lastName = data.player_last_name || "Unknown";
                const fullName = `${firstName} ${lastName}`;
                const totalPoints = data.summary_overall_points;

                // Display the name
                document.getElementById("userName").textContent = `User Name: ${fullName} and Total points = ${totalPoints}`;
            } catch (error) {
                //document.getElementById("userName").textContent = "Error fetching user data";
                console.log("Error by Guzuuu");
            }
        }
    </script>

</body>
</html>
